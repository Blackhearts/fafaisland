# Fafa Island Resort â€” Static Website (Vercel + Supabase)

This repo contains a static site ready to deploy on Vercel. It also includes a minimal clientâ€‘side integration with Supabase to capture contact form submissions.

## What's included
- `index.html` (renamed from `home.html`)
- Other pages: `rooms.html`, `aboutus.html`, `gallery.html`, `contactus.html`
- Shared styles: `style.css`
- Supabase client: `js/supabaseClient.js`
- Contact form handler: `js/contact.js`
- (Optional) The original `home.html` is kept for reference.

> **Caseâ€‘sensitive links fixed**: All navigation links are now lowercase (Linux servers are caseâ€‘sensitive).

---

## 1) Set up Supabase
1. Create a Supabase project â†’ get your **Project URL** and **anon public key** (Settings â†’ API).
2. In your project, create the table for contact messages. Run this SQL in the Supabase SQL editor:

```sql
create table if not exists public.contact_messages (
  id bigint generated by default as identity primary key,
  name text not null,
  email text not null,
  subject text not null,
  message text not null,
  created_at timestamp with time zone default now()
);
-- Row Level Security (RLS)
alter table public.contact_messages enable row level security;
-- Simple insert policy allowing anon inserts from the website
create policy "Allow anonymous inserts"
  on public.contact_messages
  for insert
  to anon
  with check (true);
```

3. Open `js/supabaseClient.js` and replace:
   - `SUPABASE_URL` â†’ your project URL, e.g. `https://abcxyz.supabase.co`
   - `SUPABASE_ANON_KEY` â†’ your anon public key

> The anon key is **safe to expose in the browser**. Never use your service_role key on the client.

---

## 2) Run locally (optional)
You can simply open `index.html` in a browser. For a better local dev experience, use a local server:

```bash
# Python 3
python -m http.server 5173

# or Node (if installed)
npx http-server -p 5173
```
Then visit `http://localhost:5173`.

---

## 3) Push to GitHub
```bash
git init
git add .
git commit -m "Initial commit: static site + Supabase contact form"
git branch -M main
# Create an empty GitHub repo first, then:
git remote add origin https://github.com/<your-username>/<your-repo>.git
git push -u origin main
```

---

## 4) Deploy on Vercel (static site)
1. Go to Vercel â†’ **Add Newâ€¦ â†’ Project** â†’ Import your GitHub repo.
2. Framework preset: **Other** (static).
3. Build & Output settings: leave empty (no build). Vercel will serve the static files from the repo root. Ensure that `index.html` exists in the root (it does).
4. Click **Deploy**.

> If you later add a custom domain, configure it in Vercel â†’ Domains.

---

## 5) Use the contact form
On `contactus.html`, the form posts to Supabase via `js/contact.js`. Submissions go into the `contact_messages` table. View rows in the Supabase table editor or query them as needed.

---

## 6) Environments (optional)
Because this is a **static** site (no build step), thereâ€™s no automatic environment variable injection. For different environments, consider:
- **Separate branches** (e.g., `dev` vs. `main`) where `js/supabaseClient.js` contains different keys/URLs per branch.
- Using a tiny `env.js` file loaded before `supabaseClient.js` with the appropriate values per branch.

---

## 7) Common issues
- **404s after deploy**: Check that your links are lowercase and point to `index.html`, `rooms.html`, etc. Linux hosting is caseâ€‘sensitive.
- **Form errors**: Ensure the Supabase URL/key are correct and that the table + RLS policy are created.
- **CORS**: Supabase allows browser requests by default for anon; if you changed settings, whitelist your Vercel domain in Supabase (Authentication â†’ URL configuration).

Enjoy! ðŸŒ´
